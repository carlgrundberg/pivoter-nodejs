<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Pivoter</title>
    <link rel="stylesheet" type="text/css" media="all" href="style.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://pivoter.menmo.se:81/socket.io/socket.io.js"></script>

    <script type="text/javascript">
        var socket = io.connect('pivoter.menmo.se:81');
        socket.on('update', function(data) {
            if(data.status == 0) {
                showpage('start');
            }
        });
        $(function() {
            $(".button").click(function() {
                $(".button").removeClass('active');
                $(this).addClass('active');
                socket.emit('my_vote', { value: this.id });
            });
            socket.on('voting_room_update', function(data) {
                $('#votes').html(data.voted);
            });
            socket.on('voting_room_update', function(data) {
                $('#voters').html(data.total);
            });
        });

        function showpage(page) {
            $('.page').hide();
            $('#'+page).show();
        }
    </script>
</head>
<body>
<div id="header">Pivoter</div>
<div id="start" class="page">
    <p>No story selected.</p>
</div>
<div id="vote" class="page">
    <div id="buttongrid">
        <div class="grid">
            <div class="button" id="0">0</div>
        </div>
        <div class="grid">
            <div class="button" id="1">1</div>
        </div>
        <div class="grid">
            <div class="button" id="2">2</div>
        </div>
        <div class="grid">
            <div class="button" id="3">3</div>
        </div>
        <div class="grid">
            <div class="button" id="5">5</div>
        </div>
        <div class="grid">
            <div class="button" id="8">8</div>
        </div>
        <div class="grid">
            <div class="button" id="13">13</div>
        </div>
        <div class="grid">
            <div class="button" id="20">20</div>
        </div>
        <div class="grid">
            <div class="button" id="40">40</div>
        </div>
        <div class="grid">
            <div class="button" id="100">100</div>
        </div>
        <div class="grid">
            <div class="button" id="1000">?</div>
        </div>
        <div class="grid">
            <div class="button" id="1001"><img src="coffe_cup.png" height="42" width="42" /></div>
        </div>
        <div style="clear:both"></div>
        <div id="footer"><span id="votes">0</span> of <span id="voters">1</span> votes in</div>
    </div>
</div>
</body>
</html>